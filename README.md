````markdown
# STM32G070RCT6 驱动 YCHIOT® MAX3220 UWB 模块（基于 DW3220）

本项目基于 STM32G070RCT6 微控制器，通过 SPI 接口驱动 YCHIOT® 开发的 MAX3220 超宽带（UWB）模块。该模块集成了射频电路、前端放大器、电源管理和时钟系统，适用于高精度室内定位系统，支持双向测距（TOF）和 TDOA 方案。

工程使用 STM32CubeMX 进行配置，Keil MDK-ARM 编译调试，适用于开发定位标签、基站或UWB通信模块的嵌入式应用。

---

## 📦 关于 MAX3220 模块

YCHIOT® MAX3220 是一款基于 YCHIOT® DW3220 IC 的高集成度 UWB 射频模块：

- 支持 IEEE 802.15.4-2015 和 IEEE 802.15.4z BPRF 协议
- 符合 FiRa™ PHY、MAC 和认证规范
- 支持 UWB 信道 5（6.5 GHz）与信道 9（8 GHz）
- 适配中国工信部《无[2024] 77号》UWB 射频管理规定
- 采用 SPI 接口与主控通信

### 型号区分

| 型号          | 描述                             |
|---------------|----------------------------------|
| MAX3220-SMA   | 带 SMA 天线接口                  |
| MAX3220-X     | 可外接天线（焊盘引出）           |

---

## 📁 项目结构

```bash
├── Core/               # 用户代码与启动文件（STM32CubeMX 生成）
├── Drivers/            # STM32 HAL 驱动库
├── MDK-ARM/            # Keil 工程文件
├── Src/                # 用户自定义 UWB 驱动代码
├── DW3000_M0.ioc       # STM32CubeMX 工程配置
├── keilkilll.bat       # 一键清理 Keil 编译文件的脚本
└── README.md           # 本说明文档
````

---

## ⚙️ 功能说明

* SPI 通信初始化与数据收发
* 控制 MAX3220 模块上电、复位、状态读取
* 支持后续扩展 FiRa 协议帧交互及 ranging 功能
* 可作为定位标签或基站的嵌入式底层驱动

---

## 🔧 硬件接口说明（默认引脚）

```
STM32G070RCT6 <--------> MAX3220 模块（SPI 通信）

PA5  ------->  SCK  
PA6  <-------  MISO  
PA7  ------->  MOSI  
PA4  ------->  NSS（片选）

PB0  ------->  UWB_RST（复位引脚）  
PB1  <-------  UWB_IRQ（中断/就绪状态）
```

> 实际连接方式建议参考 MAX3220 模块手册或原理图设计。

---

## 🔬 技术参数摘要

* 定位精度：<10cm（TOF / TDOA）
* 通信速率：850 kbps 或 6.8 Mbps
* 最长测距距离：高达 500 米（空旷环境）
* 接收机：全相干接收，增强稳定性与精度
* 数据包长度：最长支持 1023 字节
* 通信接口：SPI
* 电源电压：3.0V - 3.6V
* 功耗：低功耗设计，适用于移动终端或电池供电系统
* 尺寸：小型封装，适用于空间受限场景
* 安规认证：符合 FCC、ETSI、中国工信部《无\[2024] 77号》规范
* 引脚兼容：DWM1000 / DWM3220 / MAX2001 / MAX5007

---

## 🚀 快速开始

1. 使用 STM32CubeMX 打开并查看 `DW3000_M0.ioc` 引脚和 SPI 配置
2. 使用 Keil 打开 `MDK-ARM/*.uvprojx` 工程，编译并烧录程序
3. 连接 MAX3220 模块至指定引脚，供电并复位后查看 SPI 通信是否正常
4. 使用逻辑分析仪或串口输出验证模块初始化与响应情况

---

## 📬 联系我们

如需获取 MAX3220 模块的更多技术资料或购买样品，请联系：

* 📧 邮箱：[lds@ychiot.com](mailto:lds@ychiot.com)
* 🌐 官网：[www.ychiot.com](http://www.ychiot.com)
* 💬 欢迎通过 Issues 页面反馈问题或建议

---
